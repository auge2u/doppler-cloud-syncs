{
  "project": {
    "name": "doppler-cloud-syncs",
    "type": "cli-tool",
    "language": "TypeScript",
    "description": "Unified secret management across cloud platforms using Doppler as the source of truth",
    "repository": "https://github.com/auge2u/doppler-cloud-syncs",
    "license": "MIT",
    "author": "auge2u"
  },
  "tech_stack": {
    "runtime": "Node.js 20+",
    "language": "TypeScript 5.4",
    "package_manager": "pnpm 9+",
    "build_tool": "tsup",
    "test_framework": "vitest",
    "linter": "tsc (type checking), ESLint",
    "monorepo": true,
    "module_system": "ESM"
  },
  "packages": {
    "@auge2u/dcs": {
      "path": "packages/cli",
      "description": "CLI for syncing secrets across platforms",
      "type": "cli",
      "version": "0.1.0",
      "dependencies": {
        "chalk": "^5.3.0",
        "commander": "^12.0.0",
        "inquirer": "^9.2.0",
        "yaml": "^2.4.0",
        "zod": "^3.22.0"
      }
    },
    "@auge2u/dcs-runtime": {
      "path": "packages/runtime",
      "description": "Runtime secret injection for serverless platforms",
      "type": "library",
      "version": "0.1.0",
      "adapters": ["firebase", "cloudflare", "cloudrun"]
    },
    "@auge2u/dcs-dotfiles": {
      "path": "packages/dotfiles",
      "description": "Shell integration and completions",
      "type": "shell-plugin",
      "version": "0.1.0",
      "shells": ["bash", "zsh"]
    }
  },
  "platforms_supported": {
    "doppler": {
      "role": "source_of_truth",
      "implemented": true
    },
    "firebase": {
      "role": "target",
      "implemented": true,
      "features": ["functions_config_sync", "runtime_adapter"]
    },
    "cloudflare": {
      "role": "target",
      "implemented": true,
      "features": ["workers_secrets_sync", "runtime_adapter"]
    },
    "neon": {
      "role": "target",
      "implemented": true,
      "features": ["provisioning", "branch_management", "migrations"]
    },
    "gcp_cloud_run": {
      "role": "target",
      "implemented": true,
      "features": ["runtime_adapter"]
    }
  },
  "cli_commands": {
    "core": ["init", "sync", "status", "diff", "run"],
    "neon": ["provision", "branch list", "branch create", "branch delete", "branch reset", "branch switch", "migrate"],
    "automation": ["hooks install", "hooks uninstall", "hooks status", "webhook serve", "webhook handler", "webhook info"]
  },
  "architecture": {
    "pattern": "monorepo",
    "structure": [
      "packages/cli - Main CLI tool",
      "packages/runtime - Serverless runtime adapters",
      "packages/dotfiles - Shell integration",
      "functions/ - Firebase Functions demo/deployment"
    ],
    "config_file": "dcs.yaml",
    "global_config": "~/.config/dcs/config.yaml"
  },
  "constraints": {
    "node_minimum": "20",
    "pnpm_minimum": "9",
    "no_commonjs": "ESM only (type: module)",
    "strict_typescript": true
  },
  "development_phases": {
    "phase1": {
      "name": "Core CLI + Doppler",
      "status": "complete",
      "features": ["init", "sync", "status", "diff", "run", "config loading"]
    },
    "phase2": {
      "name": "Neon Integration",
      "status": "complete",
      "features": ["provision neon", "branch management", "migrations"]
    },
    "phase3": {
      "name": "Runtime Adapters",
      "status": "complete",
      "features": ["Firebase adapter", "Cloudflare adapter", "Cloud Run adapter", "caching"]
    },
    "phase4": {
      "name": "Automation",
      "status": "complete",
      "features": ["git hooks", "webhooks"]
    },
    "phase5": {
      "name": "Dotfiles Integration",
      "status": "complete",
      "features": ["shell wrappers", "completions", "auto-environment detection"]
    }
  },
  "integrations": {
    "external": {
      "doppler_cli": "Required for secret operations",
      "firebase_cli": "Required for Firebase Functions config",
      "wrangler": "Required for Cloudflare Workers secrets",
      "neon_api": "Used via REST API for database operations"
    },
    "dotfiles": {
      "identity_registry": "Maps org to credentials",
      "branch_mapping": "Auto-detects environment from git branch"
    }
  },
  "evidence": {
    "files_analyzed": [
      "package.json",
      "pnpm-workspace.yaml",
      "tsconfig.base.json",
      "README.md",
      "doppler.yaml",
      "firebase.json",
      "packages/cli/package.json",
      "packages/runtime/package.json",
      "packages/dotfiles/package.json",
      "functions/package.json",
      "docs/plans/2026-02-04-dcs-cli-design.md",
      "docs/plans/2026-02-04-phase1-core-cli.md",
      "docs/plans/2026-02-04-phase2-neon-integration.md"
    ],
    "source_files_detected": 27,
    "analysis_timestamp": "2026-02-04T00:00:00Z"
  }
}
